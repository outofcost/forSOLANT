# Dev // SG Admin Panel // Settings – IP Directory (frontend)
<img width="228" height="364" alt="image" src="https://github.com/user-attachments/assets/9c789b6c-fd1d-4f58-8f3f-d4188ddca11c" />


## 1. Проблема / цель

Для реализации подмены IP-адресов провайдерам (бекенд-задача SD-2052) нужен интерфейс в SG Admin Panel, где администратор:

- заводит пул IP-адресов, доступных для подмены;
- видит, как часто по каждому IP происходят неуспешные запуски слотов (restrict count);
- управляет порогом отключения IP (restrict limit);
- вручную включает/отключает IP и удаляет их из пула;
- может массово менять статус и пороговое значение.

Цель — реализовать раздел Settings → IP Directory по макетам и связать его с бекенд-API из SD-2052.




---

## 2. Что нужно сделать (шаги)

### 2.1. Страница Settings → IP Directory

#### Навигация
- В разделе Settings (левая панель) добавить пункт **IP Directory**.
- При переходе отображается страница из макета.

#### Хедер страницы
- Заголовок: **IP Directory**
- Справа:
  - кнопка **+ Add IP Address** (primary)
  - поле **Search**
  - кнопка **Filters**

#### Таблица
Колонки (слева направо):
- чекбокс выбора строки (single/multi-select)
- IP Address
- Active — тумблер (on/off)
- Restrict Count — число неудачных попыток
- Restrict Limit — порог отключения
- Created at — дата создания
- колонка с `...` (kebab menu)

Поведение:
- Данные подтягиваются из бекенда (endpoint списка IP с пагинацией и фильтрами).
- Active:
  - состояние тумблера соответствует статусу IP (доступен / отключен);
  - при клике вызывается endpoint enable/disable;
  - после успешного ответа обновляется строка в таблице.
- Пагинация снизу (как в других разделах: номера страниц, стрелки, селект `12 / page`).

---

### 2.2. Действия с одной строкой (kebab menu)

В каждой строке в меню `...`:
- **Edit** — открыть модалку Edit IP Address
- **Delete** — открыть модалку подтверждения Delete IP Address

---

### 2.3. Модалка Edit IP Address

Открывается из `... → Edit`.

Содержимое:
- Заголовок: **Edit IP Address**
- Поля:
  - **IP Address\*** — текстовое поле с текущим IP
  - **Restrict limit\*** — числовое поле + иконка подсказки (тот же UI, что на макете)
- Кнопки:
  - **Cancel** — закрыть без сохранения
  - **Save** — отправить запрос обновления IP (IP + restrict limit)

Поведение:
- При Save:
  - отправить запрос на бекенд;
  - при успехе — закрыть модалку, обновить строку;
  - при ошибке — показать сообщение (под полем или общий алерт).

---

### 2.4. Модалка Delete IP Address

Открывается из `... → Delete`.

Содержимое:
- Заголовок: **Delete IP Address**
- Текст: **Are you sure you want to delete IP Address?**
- Кнопки:
  - **Cancel**
  - **Confirm** (красная кнопка, как на макете)

Поведение:
- При Confirm:
  - вызвать endpoint удаления IP;
  - при успехе — удалить строку из таблицы, закрыть модалку.

---

### 2.5. Модалка IP Directory Filters

Открывается по кнопке **Filters** в хедере.

Формат: правый сайдбар (как на макете).

Содержимое:
- Заголовок: **IP Directory Filters**
- Поля:
  - IP Address — текстовое (Enter IP Address)
  - Restrict limit — текст/число (Enter Restrict limit)
  - Restrict count — текст/число (Enter Restrict count)
  - Status — segmented control:
    - All (по умолчанию)
    - Active
    - Inactive
  - Created At — два поля с date-picker:
    - Start Date
    - End Date
- Кнопки:
  - **Cancel** — закрыть без применения
  - **Save** — применить фильтры

Поведение:
- При Save:
  - отправить запрос на список IP с соответствующими query-параметрами;
  - обновить таблицу.
- При Cancel:
  - фильтры не меняем (либо сбрасываем — по общему паттерну проекта).

---

### 2.6. Массовые действия (dropdown Actions)

Слева над таблицей (вместо/рядом с чекбоксом “select all”) — dropdown **Actions**, как на макете.

Опции:
- Enable
- Disable
- Delete
- Set Restrict Limit

Поведение:
- Действия доступны только если выбраны 1+ строк.

Enable:
- открыть модалку подтверждения Enable IP Address;
- на “Yes” — отправить батч-запрос на включение всех выбранных IP (или по одному в цикле — зависит от бек-API);
- обновить статусы Active в таблице.

Disable:
- модалка Disable IP Address;
- аналогично Enable, только выключение.

Delete:
- либо переиспользовать модалку Delete с текстом вида:
  - **Are you sure you want to delete selected IP Addresses?**
- после Confirm — удалить все выбранные IP из таблицы.

Set Restrict Limit:
- открыть модалку Set Restrict limit;
- сохранить новое значение restrict_limit для всех выбранных IP.

---

### 2.7. Модалки Enable / Disable IP Address (массовые действия)

Disable IP Address:
- Заголовок: **Disable IP Address**
- Текст: **Are you sure you want to Disable IP Address?**
- Кнопки:
  - No (secondary)
  - Yes (primary, красная)

Enable IP Address:
- Заголовок: **Enable IP Address**
- Текст: **Are you sure you want to Enable IP Address?**
- Кнопки:
  - No
  - Yes

Поведение:
- При Yes — применить действие ко всем выбранным IP через бекенд.

---

### 2.8. Модалка Set Restrict limit (массовое изменение)

Открывается из Actions → Set Restrict Limit.

Содержимое:
- Заголовок: **Set Restrict limit**
- Поле:
  - **Restrict limit\*** — числовой инпут (значение лимита для всех выбранных IP)
- Кнопки:
  - Cancel
  - Save

Поведение:
- При Save:
  - вызвать бекенд для массового обновления restrict_limit у выбранных IP;
  - при успехе — закрыть модалку, обновить значения в таблице;
  - учесть бизнес-правило: если лимит изменён «в большую сторону», IP снова должен быть доступен для подмены (реализуется на бекенде), фронт должен обновить статус Active после ответа.

---

### 2.9. Модалка Add IP Address

Открывается по кнопке **+ Add IP Address**.

По паттерну остальных разделов и макета Edit IP Address.

Содержимое:
- Заголовок: **Add IP Address**
- Поля:
  - **IP Address\*** — пустой инпут
  - **Restrict limit\*** — пустой инпут (по умолчанию значение можно не подставлять)
- Кнопки:
  - Cancel
  - Save — отправляет запрос создания нового IP

Поведение:
- При успехе:
  - закрыть модалку;
  - добавить строку в таблицу (в начало/соответствующее место).

---

## 3. Критерии приёмки

- В левой панели Settings появился пункт IP Directory, переход на страницу работает.
- Таблица отображает все колонки из макета, данные приходят с бекенда.
- Тумблер Active синхронно переключает статус на бекенде (enable/disable), UI обновляется без перезагрузки страницы.
- Kebab-меню в строке:
  - открывает Edit IP Address, изменения сохраняются и отображаются;
  - по Delete показывает модалку и после подтверждения удаляет IP.
- Кнопка Filters открывает сайдбар IP Directory Filters, фильтры применяются к данным таблицы.
- Массовые действия в Actions работают:
  - Enable / Disable / Delete / Set Restrict Limit применяются ко всем выбранным IP;
  - показываются соответствующие модалки подтверждения / ввода лимита.
- При изменении Restrict limit через Edit или Set Restrict Limit фронт корректно обновляет отображаемый лимит и статус (если бекенд вернул изменение активности).
- Пагинация и поиск (Search) работают.

---

## 4. Когда будете передавать задачу, приложите

Скриншоты готового интерфейса:
- страница IP Directory
- Edit IP Address
- Delete IP Address
- IP Directory Filters
- модалки Enable/Disable
- модалка Set Restrict limit
